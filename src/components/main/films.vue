<template>
    <div>
        <van-overlay :show="show" >
            <div>
                <svg t="1578746802285" class="icon" viewBox="0 0 1390 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2204" width="48" height="48"><path d="M1279.461328 1023.998758h-73.995772a7.040297 7.040297 0 1 1 0-14.080594h73.995772a7.040297 7.040297 0 1 1 0 14.080594zM1151.650562 1023.998758H167.345221a7.040297 7.040297 0 1 1 0-14.080594h984.305341a7.040297 7.040297 0 1 1 0 14.080594zM135.263372 1023.998758H111.45999a7.040297 7.040297 0 1 1 0-14.080594h23.803382a7.040297 7.040297 0 1 1 0 14.080594z" fill="#7ECAFC" p-id="2205"></path><path d="M104.129089 524.92377c-0.699186-7.821449-7.606601-13.593772-15.426808-12.894585a14.627028 14.627028 0 0 0-9.558858 5.065685 13.660834 13.660834 0 0 0-3.179249 10.316414 14.6084 14.6084 0 0 0 5.1402 9.558858 13.088321 13.088321 0 0 0 9.003731 3.381678h1.126398c7.818965-0.700428 13.59253-7.606601 12.894586-15.42805z m-8.663453 11.405555a11.529744 11.529744 0 0 1-12.756735-1.398373 10.561067 10.561067 0 0 1-4.0523-7.801578 11.539679 11.539679 0 0 1 2.593074-8.488346 10.578453 10.578453 0 0 1 7.821449-4.053542h1.033256a11.447779 11.447779 0 0 1 11.508632 10.475376 11.52726 11.52726 0 0 1-6.147376 11.266463zM1261.965525 164.421803c-0.968677-10.820623-10.527536-18.809727-21.346916-17.84105a20.221761 20.221761 0 0 0-13.223688 7.008008 18.901627 18.901627 0 0 0-4.401272 14.27433 20.210584 20.210584 0 0 0 7.113569 13.224929 18.108057 18.108057 0 0 0 12.457439 4.679457h1.558577c10.819381-0.964952 18.807243-10.522568 17.842291-21.345674z m-11.986761 15.781989a15.955855 15.955855 0 0 1-17.652282-1.934871 14.6084 14.6084 0 0 1-5.608393-10.794543 15.96579 15.96579 0 0 1 3.587832-11.745834 14.639447 14.639447 0 0 1 10.821864-5.608393h1.430662c8.279708-0.074514 15.221895 6.241759 15.922324 14.494145a15.945919 15.945919 0 0 1-8.502007 15.589496zM240.901363 97.989165a3.055059 3.055059 0 0 1-3.05506-3.055059V75.179297l-13.951437 13.95268a3.132057 3.132057 0 0 1-4.428594-4.427353l13.955163-13.952679H213.630612a3.06872 3.06872 0 1 1 0-6.138682h19.790823l-13.955163-13.786266a2.915967 2.915967 0 0 1 0-4.427352 2.914725 2.914725 0 0 1 2.215539-1.015869c0.850697 0 1.656687 0.368843 2.213055 1.015869l13.951437 13.818555V40.460908a3.051334 3.051334 0 0 1 4.693118-3.164346 3.04264 3.04264 0 0 1 1.277909 3.164346v19.757292l14.089288-13.953922a2.918451 2.918451 0 0 1 4.428594 0 2.918451 2.918451 0 0 1 0 4.427353L248.378807 64.646794h19.75605a3.067478 3.067478 0 1 1 0 6.136198H248.378807l13.955163 13.956406c0.791086 0.787361 1.097834 1.94108 0.809715 3.021528a3.138266 3.138266 0 0 1-2.213055 2.215539 3.134541 3.134541 0 0 1-3.025254-0.813441l-14.089288-13.984969v19.756051c0.336553 1.71133-1.372293 3.053817-3.051334 3.053817h0.136609zM208.018493 934.134064h-8.443638v-8.44488c0-1.404582-1.136333-2.540915-2.540915-2.540915s-2.540915 1.136333-2.540915 2.540915v8.44488h-8.443638a2.539673 2.539673 0 1 0 0 5.08183h8.443638v8.443638a2.529738 2.529738 0 0 0 2.528496 2.526012l0.02608-0.109286a2.521045 2.521045 0 0 0 2.527254-2.528497v-8.330625h8.443638a2.542157 2.542157 0 0 0 0-5.083072zM1206.404428 876.856669c0 16.738248-11.334767 29.903566-25.352025 29.903567 14.05824 0 25.352025 13.391343 25.352025 29.904808 0-16.740732 11.336009-29.904808 25.348299-29.904808-14.05824 0.001242-25.348299-13.386376-25.348299-29.903567z m0 0" fill="#CCCCCC" p-id="2206"></path><path d="M988.198679 129.231493H402.550016C319.268602 129.231493 252.104489 196.395606 252.104489 279.675778v586.993634c0 81.935201 67.164113 149.094346 150.445527 149.094347h586.992392c81.936443 0 149.095588-67.159146 149.095588-150.443044V279.675778c-0.001242-83.280172-67.160387-150.444285-150.439317-150.444285z" fill="#DFEFF7" p-id="2207"></path><path d="M326.618131 866.669412v-586.993634c0-83.280172 67.164113-150.444285 150.445527-150.444285h-74.513642C319.268602 129.231493 252.104489 196.395606 252.104489 279.675778v586.993634c0 81.935201 67.164113 149.094346 150.445527 149.094347h74.513642c-83.281414 0-150.445527-67.159146-150.445527-149.094347z" fill="#C7E6F9" p-id="2208"></path><path d="M989.542408 1022.804056H402.550016c-86.838198 0-157.485824-70.04034-157.485824-156.134644v-586.993634c0-42.158577 16.355744-81.732772 46.054398-111.431426s69.272849-46.054398 111.431426-46.054398h585.648663c42.157335 0 81.73153 16.355744 111.428942 46.054398 29.69617 29.698654 46.050673 69.271607 46.050673 111.431426v326.867752a7.040297 7.040297 0 1 1-14.080595 0V279.675778c0-79.072635-64.328869-143.403988-143.39902-143.403988H402.550016c-79.073877 0-143.403988 64.330111-143.403988 143.403988v586.993634c0 78.327499 64.330111 142.054049 143.403988 142.054049h586.992392c78.328741 0 142.055291-64.330111 142.055291-143.402746v-51.587036a7.040297 7.040297 0 1 1 14.080595 0v51.587036c-0.001242 86.836957-70.042824 157.483341-156.135886 157.483341z" fill="#7ECAFC" p-id="2209"></path><path d="M1138.636754 709.003513a7.040297 7.040297 0 0 1-7.040297-7.040297v-58.989966a7.040297 7.040297 0 1 1 14.080595 0v58.989966a7.040297 7.040297 0 0 1-7.040298 7.040297zM564.46816 595.169023l0 0z m0 0M682.208408 477.398969c9.725272 9.726514 25.496085 9.726514 35.222598 0s9.726514-25.497326 0-35.22384-25.497326-9.726514-35.222598 0c-9.728998 9.725272-9.728998 25.497326 0 35.22384z m0 0M679.633961 710.598105c9.833317 9.832075 25.776753 9.832075 35.61007 0 9.832075-9.833317 9.829591-25.776753-0.002484-35.610069-9.833317-9.833317-25.776753-9.833317-35.610069 0-9.834559 9.834559-9.832075 25.776753 0.002483 35.610069z m0 0" fill="#7ECAFC" p-id="2210"></path><path d="M797.333227 592.869035a25.123516 25.123516 0 1 0 35.530588-35.533072 25.126 25.126 0 0 0-42.035629 11.263979 25.128484 25.128484 0 0 0 6.505041 24.269093z m0 0" fill="#FFFFFF" p-id="2211"></path><path d="M939.546238 787.02178h-96.855316c67.216273-46.005964 111.322139-123.338706 111.32214-211.00028 0-141.12387-114.420665-255.544535-255.544536-255.544535s-255.48865 114.420665-255.48865 255.544535c0 137.257854 108.219888 249.231988 244.014791 255.270077 1.086657 0.162688 2.226716 0.270733 3.425144 0.270733h249.126427c12.289783 0 22.296965-9.953781 22.296966-22.298207-0.055885-12.289783-10.008424-22.242322-22.296966-22.242323zM650.504095 410.532911c27.244671-27.245913 71.348054-27.245913 98.595209 0 27.244671 27.244671 27.244671 71.350538 0 98.595209-27.245913 27.247155-71.349296 27.247155-98.595209 0-27.19127-27.244671-27.19127-71.405181 0-98.595209z m-117.630961 216.223686c-27.244671-27.244671-27.244671-71.346812 0-98.593967 27.245913-27.244671 71.349296-27.244671 98.596451 0 27.244671 27.247155 27.244671 71.349296 0 98.593967-27.247155 27.245913-71.405181 27.245913-98.596451 0z m213.887684 115.291233c-27.244671 27.244671-71.346812 27.244671-98.596451 0-27.244671-27.245913-27.244671-71.349296 0-98.593967 27.249639-27.247155 71.35178-27.247155 98.596451 0 27.190028 27.244671 27.190028 71.402697 0 98.593967z m19.087911-117.628477c-27.245913-27.245913-27.245913-71.349296 0-98.596451 27.244671-27.244671 71.350538-27.244671 98.596451 0 27.244671 27.247155 27.244671 71.350538 0 98.596451-27.245913 27.190028-71.405181 27.190028-98.596451 0z" fill="#C7E6F9" p-id="2212"></path></svg>
                <span>小影正在水速跑来</span>
            </div>
        </van-overlay>
        <van-pull-refresh v-model="isLoading" :head-height='100' pulling-text='你拉我下试试(„ಡωಡ„)'  loosing-text='错了错了，不要拉了X﹏X' 
        loading-text='页面正在向你飞奔' success-text="页面已从M78新云飞来ㄟ(≧◇≦)ㄏ" @refresh="onRefresh">
            <div class="mui-card">
                        <hea></hea>
                <div class="mui-card-header">
                    <div class="img">
                        <van-image lazy-load  :src="info.cover"/>
                    </div>
                    <div class="info">
                        <h4>{{info.name}}</h4>
                        <h6>{{info.director}}</h6>
                        <h6>{{info.performer}}</h6>
                        <h6>{{info.Release}}</h6>
                        <h6>{{info.region}}</h6>
                        <h6>{{info.Language}}</h6>
                        <h6>{{info.time}}</h6>
                    </div>
                </div>
                <div class="mui-card-content">
                    <div class="mui-card-content-inner">
                        {{info.introduce}}
                    </div>
                </div>
                <div class="but">
                    <van-button type="primary" color="linear-gradient(to right, #659ef5, #fe798c)" @click="read">{{ sart }}</van-button>
                    <van-button type="primary" color="linear-gradient(to right, rgba(71, 241, 91, 0.72), rgb(77, 208, 190))" @click="changeadd">{{ text }}</van-button>
                </div>
                <van-field v-if="da" v-model="digit" type="digit" placeholder="点击狮子头,前往指定地点">
                    <svg slot="right-icon" @click="goto" t="1579686112331" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1359" width="32" height="32"><path d="M513.636937 54.19008a8.777143 8.777143 0 0 1 10.027886 0.093623c42.50624 30.18752 76.244114 58.858057 101.223863 86.065737 25.174309 27.419794 44.374309 56.533577 57.557577 87.328183 2.479543 5.791451-1.770057 12.230949-8.06912 12.230948H362.788571c-6.11328 0-10.354103-6.0928-8.230034-11.825737 10.327771-27.886446 29.5936-57.09824 57.718492-87.733394 27.88352-30.370377 61.674057-59.086263 101.359908-86.15936z m2.794057 19.4048c-35.547429 24.889051-65.951451 51.101989-91.223771 78.627109-22.615771 24.634514-39.018789 48.031451-49.2544 70.132297h284.734903l-0.807497-1.62816c-11.933989-23.862126-27.899611-46.6944-47.9232-68.5056-22.735726-24.763246-53.294811-51.031771-91.662629-78.760229l-1.805166-1.299017-2.056777 1.4336z" fill="#91000A" p-id="1360"></path><path d="M518.582857 61.44c42.038126 29.855451 75.318126 58.136869 99.84 84.845714 24.521874 26.708846 43.173303 54.990263 55.954286 84.845715H362.788571c9.893303-26.708846 28.544731-54.990263 55.954286-84.845715s60.689554-58.136869 99.84-84.845714z" fill="#D8000F" p-id="1361"></path><path d="M518.582857 61.44c42.038126 29.855451 75.318126 58.136869 99.84 84.845714 24.521874 26.708846 43.173303 54.990263 55.954286 84.845715h-14.695863c-11.136731-19.23072-24.890514-37.760731-41.258423-55.588572-24.521874-26.708846-57.801874-54.990263-99.84-84.845714-39.150446 26.708846-72.430446 54.990263-99.84 84.845714-17.608411 19.178057-31.602103 37.709531-41.982537 55.590034L362.788571 231.131429c9.893303-26.708846 28.544731-54.990263 55.954286-84.845715s60.689554-58.136869 99.84-84.845714z" fill="#C40714" p-id="1362"></path><path d="M232.89856 680.398263c124.021029-47.766674 217.45664-71.70048 280.763246-71.70048 63.945874 0 158.632229 24.419474 284.530103 73.156023 45.655771 0.731429 76.741486 31.341714 67.393828 69.373074l-49.614263 201.874286c-8.897097 36.199863-45.019429 65.196617-81.41824 65.196617h-441.782857c-36.400274 0-72.522606-28.996754-81.419703-65.196617l-49.614263-201.874286c-9.254034-37.651017 21.122194-68.028709 66.028983-69.342354l1.366309-0.03072 3.766857-1.455543z m280.763246-54.146194c-60.898743 0-153.033874 23.667566-275.94752 71.103634l-5.264823 2.039223h-1.642789c-36.196937 0-58.446994 21.504-52.023588 47.642331l49.614263 201.874286c6.988069 28.432091 36.138423 51.831954 64.373028 51.831954h441.782857c28.233143 0 57.383497-23.399863 64.371566-51.831954l49.614263-201.874286c6.424869-26.138331-15.826651-47.642331-52.023589-47.642331h-1.642788l-5.266286-2.039223c-122.91072-47.436069-215.045851-71.103634-275.944594-71.103634z" fill="#91000A" p-id="1363"></path><path d="M513.661806 626.252069c-60.898743 0-153.033874 23.667566-275.94752 71.103634l-5.264823 2.039223h-1.642789c-36.196937 0-58.446994 21.504-52.023588 47.642331l49.614263 201.874286c6.988069 28.432091 36.138423 51.831954 64.373028 51.831954h441.782857c28.233143 0 57.383497-23.399863 64.371566-51.831954l49.614263-201.874286c6.424869-26.138331-15.826651-47.642331-52.023589-47.642331h-1.642788l-5.266286-2.039223c-122.91072-47.436069-215.045851-71.103634-275.944594-71.103634z" fill="#FFFFFF" p-id="1364"></path><path d="M512.649509 317.589211c184.142994 0 333.531429 144.678034 333.531428 323.291429 0 178.611931-149.388434 323.291429-333.531428 323.291429s-333.531429-144.679497-333.531429-323.291429c0-178.613394 149.388434-323.291429 333.531429-323.291429z m0 17.554286c-174.57152 0-315.977143 136.946834-315.977143 305.737143 0 168.788846 141.405623 305.737143 315.977143 305.737143s315.977143-136.948297 315.977142-305.737143c0-168.790309-141.405623-305.737143-315.977142-305.737143z" fill="#91000A" p-id="1365"></path><path d="M512.649509 209.337783c228.63872 0 413.988571 153.911589 413.988571 343.771428 0 94.500571-31.290514 208.299154-105.612434 225.299018-5.225326 1.195154-10.983131 1.794926-17.188572 1.878308-53.06368 103.766309-163.52256 175.108389-291.187565 175.108389-127.663543 0-238.119497-71.340617-291.187566-175.101075-6.192274-0.087771-11.942766-0.687543-17.160777-1.879771C129.963154 761.417143 98.660937 647.621486 98.660937 553.109211c0-189.85984 185.348389-343.771429 413.988572-343.771428z" fill="#D8000F" p-id="1366"></path><path d="M512.649509 209.337783c7.361097 0 14.678309 0.159451 21.945782 0.473966C316.152686 219.285211 142.546651 369.361189 142.546651 553.109211c0 94.512274 31.302217 208.309394 105.640229 225.304869 5.218011 1.193691 10.968503 1.793463 17.160777 1.879771 50.00192 97.767131 150.955154 166.751086 269.243246 174.394515-7.24992 0.468114-14.567131 0.70656-21.942857 0.70656-127.660617 0-238.118034-71.340617-291.186103-175.101075-6.192274-0.087771-11.942766-0.687543-17.160777-1.879771C129.963154 761.417143 98.660937 647.621486 98.660937 553.109211c0-189.85984 185.348389-343.771429 413.988572-343.771428z" fill="#C40714" p-id="1367"></path><path d="M689.413851 749.563611c24.972434 6.691109 39.79264 32.3584 33.100069 57.330835-3.183177 11.884251-11.821349 25.570743-22.418286 35.658605-12.516206 11.914971-26.477714 17.876114-39.456183 14.398903-12.977006-3.477211-22.089143-15.620389-26.970697-32.197485-4.134034-14.034651-4.770377-30.208-1.5872-42.090789 6.691109-24.970971 32.359863-39.79264 57.332297-33.100069z m-4.543634 16.954515c-15.608686-4.180846-31.650377 5.080503-35.832686 20.689188-5.209234 19.444297 3.622034 49.432869 16.145555 52.788663 12.522057 3.355794 35.165623-18.199406 40.374857-37.643703 4.183771-15.608686-5.07904-31.65184-20.687726-35.832685z" fill="#91000A" p-id="1368"></path><path d="M662.911269 848.473234c20.289829 5.43744 45.687954-23.559314 51.125394-43.850605 5.435977-20.289829-6.6048-41.14432-26.894629-46.58176-20.289829-5.435977-41.145783 6.6048-46.58176 26.894628-5.43744 20.289829 2.061166 58.10176 22.350995 63.537737z" fill="#FFFFFF" p-id="1369"></path><path d="M335.885166 749.563611c24.970971-6.692571 50.639726 8.127634 57.332297 33.100069 3.183177 11.882789 2.545371 28.056137-1.5872 42.090789-4.881554 16.577097-13.993691 28.720274-26.970697 32.197485-12.977006 3.477211-26.939977-2.483931-39.456183-14.398903-10.596937-10.087863-19.235109-23.774354-22.419749-35.658605-6.691109-24.970971 8.129097-50.639726 33.101532-57.330835z m4.543634 16.954515c-15.608686 4.183771-24.870034 20.225463-20.689189 35.834148 5.210697 19.444297 27.8528 40.999497 40.37632 37.643703 12.522057-3.355794 21.354789-33.344366 16.145555-52.788663-4.183771-15.608686-20.225463-24.870034-35.832686-20.687725z" fill="#91000A" p-id="1370"></path><path d="M362.387749 848.473234c20.289829-5.435977 27.788434-43.247909 22.352457-63.537737-5.43744-20.289829-26.293394-32.330606-46.583223-26.894628-20.289829 5.43744-32.332069 26.291931-26.894629 46.58176 5.435977 20.289829 30.835566 49.288046 51.126857 43.850605z" fill="#FFFFFF" p-id="1371"></path><path d="M512.649509 200.56064c233.1648 0 422.765714 157.442926 422.765714 352.548571 0 51.213166-8.851749 103.580526-25.573669 144.9984-19.532069 48.376686-48.786286 80.14848-86.858605 88.856869-31.492389 7.203109-77.89568-3.550354-148.168412-29.751589l-2.135771-0.79872a1875.913874 1875.913874 0 0 1-23.57248-9.030217l-7.729737-3.028114-44.627383-17.664-7.238217-2.827703c-9.25696-3.598629-17.011566-6.530194-24.154698-9.120914l-2.782354-1.00352-2.12992-0.760686c-22.864457-8.098377-38.477531-12.121234-47.794468-12.121234-9.3184 0-24.937326 4.025783-47.814949 12.1344l-3.165623 1.130788-3.861943 1.40288c-7.194331 2.633143-15.074743 5.633463-24.502857 9.312549l-14.360868 5.653943c-6.442423 2.552686-16.265509 6.4512-24.189806 9.591954l-13.962972 5.512046-6.445348 2.51904c-6.290286 2.44736-12.1344 4.692846-17.773714 6.824228l-6.088412 2.284983c-70.2464 26.195383-116.64384 36.94592-148.139154 29.745737-38.078171-8.705463-67.341166-40.475794-86.879086-88.853942-16.726309-41.419337-25.580983-93.789623-25.580983-145.007178 0-195.105646 189.600914-352.548571 422.765715-352.548571z m0 17.554286c-224.115566 0-405.211429 150.380251-405.211429 334.994285 0 49.09056 8.481646 99.253394 24.303909 138.43456 17.593783 43.566811 42.953874 71.097783 74.515017 78.314058 26.860983 6.141074 71.276251-4.166217 138.16832-29.109395l2.033371-0.760685c6.904686-2.586331 14.044891-5.320411 21.898972-8.379246l12.557165-4.92544c9.425189-3.724434 28.337006-11.236206 35.547429-14.09024l9.3184-3.661532 4.919588-1.916342c9.570011-3.711269 17.57184-6.724754 25.020709-9.407635l2.282057-0.8192 2.274743-0.804571c24.027429-8.462629 40.649874-12.680046 52.370286-12.680046 12.273371 0 29.912503 4.619703 55.793371 13.891292l3.777097 1.364845 2.783817 1.018149c7.824823 2.881829 16.454217 6.18496 26.923886 10.288274l14.426697 5.697829 16.866743 6.688183 19.242423 7.596617 5.080503 1.982171c6.641371 2.583406 12.776594 4.937143 18.695314 7.168l4.634332 1.737874 3.989211 1.478949c64.69632 23.875291 107.885714 33.655954 134.206903 27.636297 31.553829-7.217737 56.905143-34.750171 74.494537-78.316983 15.817874-39.179703 24.298057-89.341074 24.298057-138.425783 0-184.614034-181.095863-334.994286-405.211428-334.994285z" fill="#91000A" p-id="1372"></path><path d="M733.540937 395.12064c92.910446 0 168.228571 75.318126 168.228572 168.228571 0 92.908983-75.318126 168.228571-168.228572 168.228572s-168.228571-75.319589-168.228571-168.228572c0-92.910446 75.318126-168.228571 168.228571-168.228571z m0 17.554286c-83.214629 0-150.674286 67.458194-150.674286 150.674285 0 83.214629 67.459657 150.674286 150.674286 150.674286s150.674286-67.459657 150.674286-150.674286c0-83.216091-67.459657-150.674286-150.674286-150.674285z" fill="#91000A" p-id="1373"></path><path d="M733.540937 563.349211m-159.451428 0a159.451429 159.451429 0 1 0 318.902857 0 159.451429 159.451429 0 1 0-318.902857 0Z" fill="#FFFFFF" p-id="1374"></path><path d="M699.895223 563.349211m-125.805714 0a125.805714 125.805714 0 1 0 251.611428 0 125.805714 125.805714 0 1 0-251.611428 0Z" fill="#D8000F" p-id="1375"></path><path d="M699.895223 563.349211m-78.994286 0a78.994286 78.994286 0 1 0 157.988572 0 78.994286 78.994286 0 1 0-157.988572 0Z" fill="#FFEC4D" p-id="1376"></path><path d="M699.895223 563.349211m-46.811429 0a46.811429 46.811429 0 1 0 93.622857 0 46.811429 46.811429 0 1 0-93.622857 0Z" fill="#1C1C1E" p-id="1377"></path><path d="M699.895223 563.349211m-23.405714 0a23.405714 23.405714 0 1 0 46.811428 0 23.405714 23.405714 0 1 0-46.811428 0Z" fill="#FFFFFF" p-id="1378"></path><path d="M298.422857 395.12064C205.512411 395.12064 130.194286 470.438766 130.194286 563.349211s75.318126 168.228571 168.228571 168.228572 168.228571-75.318126 168.228572-168.228572S391.333303 395.12064 298.422857 395.12064z m0 17.554286c83.214629 0 150.674286 67.459657 150.674286 150.674285s-67.459657 150.674286-150.674286 150.674286S147.748571 646.56384 147.748571 563.349211 215.208229 412.674926 298.422857 412.674926z" fill="#91000A" p-id="1379"></path><path d="M298.422857 563.2m-159.451428 0a159.451429 159.451429 0 1 0 318.902857 0 159.451429 159.451429 0 1 0-318.902857 0Z" fill="#FFFFFF" p-id="1380"></path><path d="M330.605714 563.2m-125.805714 0a125.805714 125.805714 0 1 0 251.611429 0 125.805714 125.805714 0 1 0-251.611429 0Z" fill="#D8000F" p-id="1381"></path><path d="M330.605714 563.2m-78.994285 0a78.994286 78.994286 0 1 0 157.988571 0 78.994286 78.994286 0 1 0-157.988571 0Z" fill="#FFEC4D" p-id="1382"></path><path d="M330.605714 563.2m-46.811428 0a46.811429 46.811429 0 1 0 93.622857 0 46.811429 46.811429 0 1 0-93.622857 0Z" fill="#1C1C1E" p-id="1383"></path><path d="M330.605714 563.2m-23.405714 0a23.405714 23.405714 0 1 0 46.811429 0 23.405714 23.405714 0 1 0-46.811429 0Z" fill="#FFFFFF" p-id="1384"></path><path d="M549.668571 506.528914c10.806126-30.72 135.533714-213.372343 200.777143-260.760137 65.243429-47.389257 136.260754-58.392869 167.129966-36.430994 30.866286 21.961874 35.140754 195.784411-2.731154 232.821028-169.6768-7.510309-291.401143 41.347657-365.175955 146.572435-7.204571-34.321554-7.204571-61.723794 0-82.203795z" fill="#FFE400" p-id="1385"></path><path d="M917.57568 209.337783c17.898057 12.734171 26.855131 76.527909 23.83872 135.10656-2.192823-42.71104-10.551589-80.305006-23.83872-89.757989-30.869211-21.961874-101.888-10.9568-167.129966 36.430995-65.243429 47.387794-189.971017 230.038674-200.777143 260.758674-1.614994 4.591909-2.8672 9.530514-3.759542 14.81728-3.08224-24.221989-1.828571-44.276297 3.759542-60.165852 10.806126-30.72 135.533714-213.37088 200.777143-260.758674 65.243429-47.389257 136.260754-58.392869 167.129966-36.430994z" fill="#FFA700" p-id="1386"></path><path d="M922.720549 201.894766c17.589394 13.320777 27.35104 60.837303 27.56608 117.48352 0.222354 58.723474-10.008869 109.032594-29.783772 128.371565l-2.720914 2.6624-3.803429-0.168228c-166.890057-7.387429-285.710629 40.30464-357.60128 142.843611l-11.619474 16.571246-4.15744-19.807086c-7.504457-35.75808-7.504457-64.702171 0.310126-86.920045 5.889463-16.740937 39.877486-69.868983 78.790948-123.149166l3.81952-5.207772 2.827703-3.82976c46.123886-62.292846 88.96512-111.338057 118.462172-132.7616 64.31744-46.717806 139.50976-62.03392 176.272822-37.244342l1.101532 0.763611 0.535406 0.392046z m-11.680915 230.114743c13.551909-17.608411 21.884343-61.843749 21.692709-112.563932-0.19456-51.249737-9.412023-95.591863-20.724297-103.640503-13.1072-9.324251-36.172069-11.850606-63.871269-6.334171-29.988571 5.974309-62.756571 20.740389-93.011383 42.715428-27.896686 20.263497-70.4512 69.112686-116.086491 130.922789l-2.798446 3.800503-2.321554 3.171474c-37.841189 51.812937-71.343543 104.165669-76.448914 118.675749-5.207771 14.808503-6.301989 34.059703-3.126126 57.711177 75.15136-94.700983 192.608549-139.341531 351.45728-134.107429l4.827428 0.17408 0.411063-0.526628zM512 179.782217c48.474697 0 87.771429 39.296731 87.771429 87.771429s-39.296731 87.771429-87.771429 87.771428-87.771429-39.296731-87.771429-87.771428 39.296731-87.771429 87.771429-87.771429z m0 17.554286c-38.780343 0-70.217143 31.4368-70.217143 70.217143s31.4368 70.217143 70.217143 70.217143 70.217143-31.4368 70.217143-70.217143-31.4368-70.217143-70.217143-70.217143z" fill="#91000A" p-id="1387"></path><path d="M512 267.553646m-78.994286 0a78.994286 78.994286 0 1 0 157.988572 0 78.994286 78.994286 0 1 0-157.988572 0Z" fill="#FFE400" p-id="1388"></path><path d="M512 188.55936c2.966674 0 5.895314 0.16384 8.777143 0.482743-39.497143 4.365166-70.217143 37.851429-70.217143 78.511543 0 40.661577 30.72 74.146377 70.217143 78.511543-2.881829 0.318903-5.810469 0.482743-8.777143 0.482742-43.626789 0-78.994286-35.366034-78.994286-78.994285 0-43.626789 35.367497-78.994286 78.994286-78.994286z" fill="#FFA700" p-id="1389"></path><path d="M513.380937 673.063497c28.435017 0 52.460983 2.855497 74.728594 8.38656 16.754103 4.161829 29.374171 8.677669 51.580343 17.791269l8.051566 3.310445 4.315429 1.755429c15.291246 6.179109 25.044114 9.628526 36.678217 12.751726l2.29376 0.60416c16.995474 4.38272 34.833554 6.849097 55.518354 7.333303 66.761874 1.565257 133.405257-12.07296 200.001829-40.968778 5.797303-2.514651 12.271909 1.734949 12.271908 8.053029 0 63.08864-45.698194 116.891063-107.955931 127.101806-18.537326 3.039817-38.749623 4.555337-60.638355 4.555337-25.984731 0-50.412983-2.789669-75.787702-8.192l-3.352869-0.725577c-15.458011-3.390903-28.573989-6.996846-51.89632-14.041966l-20.017737-6.08256c-22.367086-6.755474-35.073463-10.257554-49.620114-13.474377l-4.038949-0.877714c-24.219063-5.155109-47.43168-7.805806-72.133486-7.805806-24.69888 0-47.911497 2.650697-72.13056 7.807268l-2.305463 0.495909c-16.246491 3.5328-29.691611 7.2704-55.834331 15.212251l-10.156617 3.093943c-27.803063 8.455314-41.728 12.326034-59.222309 16.095817l-3.711268 0.785555c-24.552594 5.086354-48.287451 7.709257-73.483703 7.709257-21.890194 0-42.101029-1.51552-60.638354-4.555337-62.2592-10.210743-107.955931-64.014629-107.955932-127.101806 0-6.549211 6.912-10.791497 12.751726-7.826286 56.953417 28.923611 123.421257 42.52672 199.522011 40.742035 24.982674-0.585143 45.550446-3.355794 64.169692-8.211018l1.265371-0.333531c13.955657-3.728823 24.230766-7.596617 43.050423-15.719863l7.786789-3.370423c18.7392-8.063269 29.5936-12.122697 43.812571-15.850057l1.655954-0.428617c20.724297-5.302857 43.593143-8.019383 71.425463-8.019383z m425.047772 33.369234c-63.884434 25.570743-128.002926 37.62176-192.292572 36.113555-22.045257-0.516389-41.229166-3.171474-59.538286-7.897966l-1.56672-0.4096c-13.683566-3.629349-24.614034-7.554194-42.81344-14.979657l-11.473188-4.711863c-20.051383-8.184686-31.71328-12.295314-46.867017-16.060709l-1.363383-0.333531c-20.484389-4.964937-42.692023-7.535177-69.134629-7.535177-26.401646 0-47.812023 2.543909-67.073463 7.470811l-1.626697 0.421303c-13.151086 3.455269-23.332571 7.263086-41.274514 14.985509l-8.933669 3.864868-3.370422 1.44384c-16.789211 7.148983-27.138926 10.924617-40.91904 14.606629l-1.329738 0.351086c-19.972389 5.21216-41.897691 8.167131-68.224731 8.784457-72.927817 1.711543-137.692891-10.288274-194.2016-36.052115 6.247863 48.091429 43.351771 87.335497 92.312137 95.363658 17.557211 2.881829 36.824503 4.325669 57.797486 4.325668 23.927954 0 46.460343-2.486857 69.864594-7.33184l2.94912-0.621714 3.180252-0.691932c14.679771-3.240229 27.441737-6.7584 50.070674-13.595794l18.696777-5.6832 9.25696-2.779428c19.267291-5.731474 31.24224-8.901486 45.632366-12.002743l3.711268-0.785555c24.552594-5.084891 48.285989-7.709257 73.483703-7.709257 25.196251 0 48.931109 2.624366 73.483703 7.709257l2.304 0.484206c17.225143 3.667383 30.62784 7.317211 56.296594 15.082057l17.665463 5.373075 7.005623 2.107977c20.816457 6.224457 32.93184 9.436891 47.958309 12.637623l2.267428 0.475428c23.404251 4.84352 45.93664 7.33184 69.864594 7.33184 20.97152 0 40.238811-1.445303 57.797486-4.324206 48.764343-7.99744 85.767314-46.957714 92.236069-94.785828l0.185783-1.452617-2.01728 0.811885z" fill="#91000A" p-id="1390"></path><path d="M76.71808 692.08064c58.309486 29.611154 126.209463 43.508297 203.702857 41.691429 116.238629-2.726766 116.48-51.931429 232.96-51.931429s130.8672 49.536731 232.96 51.931429c68.060891 1.594514 135.962331-12.302629 203.702857-41.691429 0 58.789303-42.583771 108.924343-100.599223 118.440229-18.047269 2.95936-37.787063 4.439771-59.21792 4.439771-109.165714 0-167.68-51.2-276.845714-51.2s-167.68 51.2-276.845714 51.2c-21.430857 0-41.170651-1.480411-59.21792-4.439771-58.015451-9.514423-100.600686-59.650926-100.600686-118.440229z" fill="#FFFFFF" p-id="1391"></path><path d="M471.11168 506.528914c-10.806126-30.72-135.533714-213.372343-200.777143-260.760137-65.243429-47.389257-136.260754-58.392869-167.129966-36.430994-30.866286 21.961874-35.140754 195.784411 2.731155 232.821028 169.6768-7.510309 291.401143 41.347657 365.175954 146.572435 7.204571-34.321554 7.204571-61.723794 0-82.203795z" fill="#FFE400" p-id="1392"></path><path d="M103.204571 209.337783c-17.898057 12.734171-26.855131 76.527909-23.83872 135.10656 2.192823-42.71104 10.551589-80.305006 23.83872-89.757989 30.869211-21.961874 101.888-10.9568 167.129966 36.430995 65.243429 47.387794 189.971017 230.038674 200.777143 260.758674 1.614994 4.591909 2.8672 9.530514 3.759543 14.81728 3.08224-24.221989 1.828571-44.276297-3.759543-60.165852-10.806126-30.72-135.533714-213.37088-200.777143-260.758674-65.243429-47.389257-136.260754-58.392869-167.129966-36.430994z" fill="#FFA700" p-id="1393"></path><path d="M94.222629 201.894766c-17.589394 13.320777-27.35104 60.837303-27.56608 117.48352-0.222354 58.723474 10.008869 109.032594 29.783771 128.371565l2.720914 2.6624 3.803429-0.168228c166.890057-7.387429 285.710629 40.30464 357.60128 142.843611l11.619474 16.571246 4.15744-19.807086c7.504457-35.75808 7.504457-64.702171-0.310126-86.920045-6.009417-17.083246-41.275977-72.051566-81.179794-126.409875l-1.430674-1.947063c-47.197623-64.109714-91.191589-114.730423-121.288412-136.59136-64.318903-46.717806-139.512686-62.03392-176.274285-37.244342l-1.101532 0.763611-0.535405 0.392046z m11.680914 230.114743c-13.551909-17.608411-21.884343-61.843749-21.692709-112.563932 0.19456-51.249737 9.412023-95.591863 20.722835-103.640503 13.1072-9.324251 36.173531-11.850606 63.871268-6.334171 29.990034 5.974309 62.758034 20.740389 93.012846 42.715428 27.896686 20.263497 70.4512 69.112686 116.086491 130.922789l2.798446 3.800503 2.321554 3.171474c37.841189 51.812937 71.343543 104.165669 76.448915 118.675749 5.207771 14.808503 6.301989 34.059703 3.126125 57.711177-75.15136-94.700983-192.610011-139.341531-351.45728-134.107429l-4.827428 0.17408-0.411063-0.526628z" fill="#91000A" p-id="1394"></path><path d="M476.07808 607.234926m-35.108571 0a35.108571 35.108571 0 1 0 70.217142 0 35.108571 35.108571 0 1 0-70.217142 0Z" fill="#FFE400" p-id="1395"></path><path d="M476.07808 572.126354c1.7408 0 3.449417 0.125806 5.12 0.370103C464.236251 574.976 451.209509 589.582629 451.209509 607.234926c0 17.650834 13.02528 32.258926 29.988571 34.738468A35.404069 35.404069 0 0 1 476.07808 642.343497C456.687909 642.343497 440.969509 626.625097 440.969509 607.234926S456.687909 572.126354 476.07808 572.126354z" fill="#FFA700" p-id="1396"></path><path d="M548.571429 607.234926m-35.108572 0a35.108571 35.108571 0 1 0 70.217143 0 35.108571 35.108571 0 1 0-70.217143 0Z" fill="#FFE400" p-id="1397"></path><path d="M548.571429 572.126354c1.7408 0 3.449417 0.125806 5.12 0.370103C536.7296 574.976 523.702857 589.582629 523.702857 607.234926c0 17.650834 13.02528 32.258926 29.988572 34.738468A35.404069 35.404069 0 0 1 548.571429 642.343497C529.181257 642.343497 513.462857 626.625097 513.462857 607.234926S529.181257 572.126354 548.571429 572.126354z" fill="#FFA700" p-id="1398"></path><path d="M517.851429 61.44m-51.2 0a51.2 51.2 0 1 0 102.4 0 51.2 51.2 0 1 0-102.4 0Z" fill="#FFE400" p-id="1399"></path><path d="M517.851429 10.24c2.90816 0 5.757806 0.242834 8.532845 0.708023C502.1696 15.008914 483.718583 36.071131 483.718583 61.44S502.1696 107.869623 526.384274 111.931977A51.539383 51.539383 0 0 1 517.851429 112.64C489.5744 112.64 466.651429 89.717029 466.651429 61.44S489.5744 10.24 517.851429 10.24z" fill="#FFA700" p-id="1400"></path></svg>
                </van-field>
                <div class="mui-card-footer">
                    <router-link v-for="(item, index) in list" :key="index" :to="'/main/films/info?url='+item.m3u8url+'&name='+info.name" tag="span" >{{item.num}}</router-link>
                </div>
            </div>
        </van-pull-refresh>
    </div>
</template>
<script>
import { Toast } from 'vant';
import hea from '../tool/return.vue';
export default {
    created() {
        this.getinfo();
        this.iffrom();
    },
    beforeDestroy() {
        this.add()
    },
    data() {
        return {
            url:this.$route.query.url,
            tag:this.$route.query.tag,
            info:{},
            list:[],
            show:true,
            isLoading: false,
            text:'加入暗影阁',
            isadd:false,
            ismain:true,
            sart:'立即阅读',
            digit:null,
            da:false,
        }
    },
    methods: {
        getinfo(){
            this.$axios.get('http://api.pingcc.cn/?ysurl=' + this.url).then((reslut)=>{
                if(reslut.data.code == 0){
                    this.info = reslut.data.data;
                    this.list = reslut.data.list;
                    if ( this.list.length > 5) {
                        this.da = true;
                    }
                    this.show = false;
                }else if(reslut.data.code == 1){
                    Toast({
                        message: '小影不小心带错电影了|･ω･｀)',
                        icon: 'close'
                    });
                    this.show = false;
                }
            }).catch((err)=>{
                 Toast({
                    message: '小影的船坏了╮(～▽～)╭',
                    icon: 'question-o'
                });
                this.show = false;
            });
        },
        onRefresh() {
            setTimeout(() => {
                this.getinfo();
                this.isLoading = false;
            }, 400);
        },
        goto(){
            let url = parseInt(this.digit)-1;
            if(url > this.list.length){
                return  Toast({
                    message: '不存在此章节',
                    icon: 'flag-o'
                });
            }
            this.$router.push(`/main/films/info?url=${this.list[url].m3u8url}&name=${this.info.name}&shelf=${this.isadd}`)
        },
        iffrom(){
            if (this.tag == 'main') {
                this.sart = '立即观看';
                return
            }else if (this.tag == 'user') {
                this.sart = '继续观看';
                this.ismain = false;
                this.changeadd()
            }
        },
        changeadd(){
            if (this.$store.state.user == '') {
                 return Toast({
                    message: '未登录不可管理暗影阁',
                    icon: 'close'
                });
            }
            this.isadd = !this.isadd;
            this.text = this.isadd==false?'加入暗影阁':'移出暗影阁'
        },
        add(){
            /*
                name
                author
                cover
                time
                url
                email
            */
           if (this.ismain == true) {
                if(this.isadd == false) return;
                this.$axios({
                    method:'get',
                    url:`${this.$store.state.url}user/addfilm`,
                    params:{
                        name:this.info.name,
                        genre:this.info.genre,
                        time:this.info.time,
                        url:this.url,
                        email:JSON.parse(this.$store.state.user).email,
                    }
                }).then((reslut)=>{
                    if(reslut.data.code == 0){
                        Toast({
                            message: '加入暗影阁成功    Join shadow pavilion success',
                            icon: 'passed'
                        });
                    }else if(reslut.data.code == 1){
                        Toast({
                            message: '加入暗影阁失败    Failed to join shadow court',
                            icon: 'close'
                        });
                        this.show = false;
                    }else if(reslut.data.code == 2){
                        Toast({
                            message: '暗影已存在哦  The shadow is already there',
                            icon: 'close'
                        });
                        this.show = false;
                    }
                }).catch((err)=>{
                    Toast({
                        message: '暗影阁地震    Shadow pavilion earthquake',
                        icon: 'question-o'
                    });
                    this.show = false;
                });
           }else{
                if(this.isadd == true) return;
                this.$axios({
                    method:'get',
                    url:`${this.$store.state.url}user/delfilm`,
                    params:{
                        name:this.info.name,
                        email:JSON.parse(this.$store.state.user).email,
                    }
                }).then((reslut)=>{
                    if(reslut.data.code == 0){
                        Toast({
                            message: '撤销暗影阁成功    Cancel shadow pavilion successfully',
                            icon: 'passed'
                        });
                    }else if(reslut.data.code == 1){
                        Toast({
                            message: '撤销暗影阁失败    Failed to undo shadow pavilion',
                            icon: 'close'
                        });
                        this.show = false;
                    }
                }).catch((err)=>{
                    Toast({
                        message: '暗影阁地震    Shadow pavilion earthquake',
                        icon: 'question-o'
                    });
                    this.show = false;
                });
           }
            
        },
        read(){
            if (this.isadd == true) {
                if (this.ismain == true) {
                    //main 点击加入书架后，第一次阅读
                    this.$router.push(`/main/films/info?url=${this.list[0].m3u8url}&name=${this.info.name}&shelf=true`)
                }else{
                    this.$axios({
                        method:'get',
                        url:`${this.$store.state.url}user/getfilm`,
                        params:{
                            name:this.info.name,
                            email:JSON.parse(this.$store.state.user).email,
                        }
                    }).then((reslut)=>{
                        if(reslut.data.code == 0){
                            if (reslut.data.msg[0].last == null) {
                                //用户点击加入书架后，没有阅读，导致数据库为空
                                this.$router.push(`/main/films/info?url=${this.list[0].m3u8url}&name=${this.info.name}&shelf=true`)
                                
                            }else{
                                this.$router.push(`/main/films/info?url=${reslut.data.msg[0].last}&name=${this.info.name}&shelf=true`)
                            }
                        }else if(reslut.data.code == 1){
                            Toast({
                                message: '获取影视失败  Access failure',
                                icon: 'close'
                            });
                            this.show = false;
                        }
                    }).catch((err)=>{
                        Toast({
                            message: '暗影阁地震    Shadow pavilion earthquake',
                            icon: 'question-o'
                        });
                        this.show = false;
                    });
                }
            }else{
                this.$router.push(`/main/films/info?url=${this.list[0].m3u8url}&shelf=false`)
            }
          
        },
    },
    components:{
        hea
    }
}
</script>
<style lang="less" scoped>
.van-overlay{
    div{
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        text-align: center;
        color: #fff;
    }
}
.mui-card{
    margin: 0;
    padding: 10px;
    .mui-card-header{
        display: flex;
        justify-content: space-between;
        .img{
            flex:7;
            .van-image{
                border-radius: 5px;
            }
        }
        .info{
            flex: 7;
            text-align: center;
            *{
                padding: 5px 0;
            }
        }
    }
    .but{
            display: flex;
            justify-content: space-around;
        }
    .mui-card-footer{
        display: flex;
        justify-content: space-around;
        flex-wrap: wrap;
        span{
            width: 25%;
            padding: 10px;
            text-align: center;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
        }
    }
}
</style>